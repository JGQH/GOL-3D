(this["webpackJsonpgol-3d"]=this["webpackJsonpgol-3d"]||[]).push([[0],{39:function(t,e,n){"use strict";n.r(e);var r=n(6),c=n(29),i=n.n(c),a=n(11),s=n(13),o=n(12),u=function(t){var e=Object(r.useState)(1),n=Object(a.a)(e,2),c=n[0],i=n[1],u=Object(r.useState)([]),b=Object(a.a)(u,2),f=b[0],p=b[1],v=Object(r.useState)({}),g=Object(a.a)(v,2),O=g[0],d=g[1],m=function(t){var e=t.size,n=t.prob,r=t.bgt,c=t.blt,a=t.sgt,s=t.slt,u=function(t,e){return Object(o.a)(new Array(t)).map((function(n,r){return Object(o.a)(new Array(t)).map((function(n,c){return Object(o.a)(new Array(t)).map((function(t,n){return{i:r,j:c,k:n,color:l(),isAlive:Math.random()>e,reAlive:!1}}))}))}))}(e,n/100),j={bgt:r,blt:c,sgt:a,slt:s};i(e),p(u),d(j)};return Object(r.useEffect)((function(){m(t)}),[]),{size:c,shifter:(c-1)/2,rebuild:function(t){return m(t)},map:function(t){return function(t,e){return t.map((function(t){return t.reduce((function(t,e){return t.concat(e)}),[])})).reduce((function(t,e){return t.concat(e)}),[]).map((function(t,n){return e(t,n)}))}(f,t)},update:function(){var t=Object(o.a)(f);!function(t,e){var n=e.bgt,r=e.blt,c=e.sgt,i=e.slt;j(t,(function(e){var a=function(t,e,n,r){var c=[];return c.push(h(t+1,e+1,n+1,r)),c.push(h(t+1,e+1,n,r)),c.push(h(t+1,e+1,n-1,r)),c.push(h(t+1,e,n+1,r)),c.push(h(t+1,e,n,r)),c.push(h(t+1,e,n-1,r)),c.push(h(t+1,e-1,n+1,r)),c.push(h(t+1,e-1,n,r)),c.push(h(t+1,e-1,n-1,r)),c.push(h(t,e+1,n+1,r)),c.push(h(t,e+1,n,r)),c.push(h(t,e+1,n-1,r)),c.push(h(t,e,n+1,r)),c.push(h(t,e,n-1,r)),c.push(h(t,e-1,n+1,r)),c.push(h(t,e-1,n,r)),c.push(h(t,e-1,n-1,r)),c.push(h(t-1,e+1,n+1,r)),c.push(h(t-1,e+1,n,r)),c.push(h(t-1,e+1,n-1,r)),c.push(h(t-1,e,n+1,r)),c.push(h(t-1,e,n,r)),c.push(h(t-1,e,n-1,r)),c.push(h(t-1,e-1,n+1,r)),c.push(h(t-1,e-1,n,r)),c.push(h(t-1,e-1,n-1,r)),c.filter((function(t){return t.isAlive}))}(e.i,e.j,e.k,t),o=a.length;if(e.isAlive)e.reAlive=c<=o&&o<=i;else if(e.reAlive=n<=o&&o<=r,e.reAlive){var u,l=a.map((function(t){return t.color})),j=0,b=0,f=0,p=Object(s.a)(l);try{for(p.s();!(u=p.n()).done;){var v=u.value;j+=v.R,b+=v.G,f+=v.B}}catch(g){p.e(g)}finally{p.f()}j/=o,b/=o,f/=o,e.color={R:j,G:b,B:f}}}))}(t,O),function(t){j(t,(function(t){var e=[t.reAlive,!1];t.isAlive=e[0],t.reAlive=e[1]}))}(t),p(t)}}};function l(){return{R:Math.floor(256*Math.random()),G:Math.floor(256*Math.random()),B:Math.floor(256*Math.random())}}function j(t,e){t.forEach((function(t){return t.forEach((function(t){return t.forEach((function(t){return e(t)}))}))}))}function h(t,e,n,r){try{return r[t][e][n]||{isAlive:!1}}catch(c){return{isAlive:!1}}}var b=n(16),f=n(42),p=n(9);function v(t){var e=Math.floor(t).toString(16);return t<16?"0"+e:e}function g(t){var e=v(t.R),n=v(t.G),r=v(t.B);return"#".concat(e).concat(n).concat(r)}var O=function(t){var e=t.position,n=t.color,r=t.isAlive;return Object(p.jsxs)("mesh",{position:e,children:[Object(p.jsx)("boxBufferGeometry",{attach:"geometry"}),Object(p.jsx)("meshLambertMaterial",{attach:"material",color:g(n),opacity:r?1:0,transparent:!r})]})},d=function(t){var e=t.size,n=t.shifter,r=t.map;return Object(p.jsxs)(b.a,{children:[Object(p.jsx)(f.a,{}),Object(p.jsx)("ambientLight",{intensity:.5}),Object(p.jsx)("spotLight",{position:[5+e,7+e,9+e],angle:.3}),r((function(t,e){var r=t.color,c=t.isAlive,i=[t.i-n,t.j-n,t.k-n];return Object(p.jsx)(O,{position:i,color:r,isAlive:c},e)}))]})},m=n(8),x={size:5,prob:75,bgt:4,blt:5,sgt:5,slt:5};function A(t,e){var n=e.prop,r=e.val,c=Object(m.a)({},t);return c[n]=+r,c}var y=function(t){var e=t.isAnimating,n=t.switchAnimation,c=t.doGrid,i=Object(r.useReducer)(A,x),s=Object(a.a)(i,2),o=s[0],u=s[1];function l(t,e){u({prop:t,val:e})}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"gol-title gol-control",children:Object(p.jsx)("h1",{children:"Conway's Game of Life"})}),Object(p.jsxs)("div",{className:"gol-size gol-control",children:[Object(p.jsxs)("p",{children:["Size of grid: ",o.size]}),Object(p.jsx)("input",{type:"range",value:o.size,min:5,max:15,onChange:function(t){return l("size",t.target.value)}})]}),Object(p.jsxs)("div",{className:"gol-chance gol-control",children:[Object(p.jsxs)("p",{children:["Initial chance: ",o.prob,"%"]}),Object(p.jsx)("input",{type:"range",value:o.prob,min:25,max:90,onChange:function(t){return l("prob",t.target.value)}})]}),Object(p.jsxs)("div",{className:"gol-born gol-control",children:[Object(p.jsxs)("p",{children:["Born if: ",o.bgt," <= C <= ",o.blt]}),Object(p.jsx)("input",{type:"range",value:o.bgt,min:3,max:o.blt,onChange:function(t){return l("bgt",t.target.value)}}),Object(p.jsx)("input",{type:"range",value:o.blt,min:o.bgt,max:15,onChange:function(t){return l("blt",t.target.value)}})]}),Object(p.jsxs)("div",{className:"gol-survives gol-control",children:[Object(p.jsxs)("p",{children:["Survives if: ",o.sgt," <= C <= ",o.slt]}),Object(p.jsx)("input",{type:"range",value:o.sgt,min:3,max:o.slt,onChange:function(t){return l("sgt",t.target.value)}}),Object(p.jsx)("input",{type:"range",value:o.slt,min:o.sgt,max:15,onChange:function(t){return l("slt",t.target.value)}})]}),Object(p.jsxs)("div",{className:"gol-setter gol-control",children:[Object(p.jsx)("button",{onClick:function(){return n()},children:e?"Pause":"Play"}),Object(p.jsx)("button",{onClick:function(){return c(o)},children:"Apply changes"})]})]})};var z=function(){var t=u(x),e=t.size,n=t.shifter,c=t.rebuild,i=t.map,s=t.update,o=function(t){var e=Object(r.useState)(t),n=Object(a.a)(e,2),c=n[0],i=n[1];return[c,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(null!==t?t:!c)}]}(!1),l=Object(a.a)(o,2),j=l[0],h=l[1];return Object(r.useEffect)((function(){if(j){var t=setInterval((function(){s()}),500);return function(){return clearInterval(t)}}}),[j]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"gol-drawer",children:Object(p.jsx)(d,{size:e,shifter:n,map:i})}),Object(p.jsx)("div",{className:"gol-controller",children:Object(p.jsx)(y,{isAnimating:j,switchAnimation:h,doGrid:function(t){h(!1),c(t)}})})]})};i.a.render(Object(p.jsx)(z,{}),document.getElementById("cgol"))}},[[39,1,2]]]);
//# sourceMappingURL=main.9df83b01.chunk.js.map